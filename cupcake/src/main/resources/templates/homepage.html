<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>homepage</title>
    <link rel="stylesheet" href="../public/css/style.css" th:href="@{css/style.css}"/>
</head>
<body>

<div class="flex-container image-hover">
    <div><a href="loginpage.html" th:href="@{/}">
        <img src="../public/images/cupcakelogo.png" th:src="@{/images/cupcakelogo.png}" width="100%"/>
    </a></div>
</div>

<div class="webform center-text center-two">
    <div class="usermail">
        Logget ind som: <span th:text="${session.userEmail}"></span>
    </div>

    <form th:action="@{/logout}" method="get">
        <button class="webform" type="submit">Log af</button>
    </form>

    <form th:action="@{/orderoverview}" method="get">
        <button class="text-margin" type="submit">Admin overblik</button>
    </form>

    <form th:action="@{/orderoverviewcustommer}" method="get">
        <button class="text-margin" type="submit">Kunde overblik</button>
    </form>

    <a href="shoppingcart.html" th:href="@{shoppingcart}">
        <img class="shoppingcart-logo-hover" src="../public/images/shoppingcartlogo.png"
             th:src="@{/images/shoppingcartlogo.png}" width="15%"/>
    </a>
</div>

<div class="webform center-two">
    <div class="center">
        <h2 style="font-family: Brush Script Std; font-weight: lighter; font-size: 40px;">Velkommen ombord</h2>
        <h3>Du har virkelig god smag! Vælg og bestil din cupcake her</h3>

        <form>
            <div class="custom-select">
                <select id="selectBottom" onchange="updateTotalPrice()">
                    <option value="" disabled selected>Vælg en bund</option>
                    <th:block th:each="bottom : ${bottoms}">
                        <option th:value="${bottom.bottomId}" th:data-price="${bottom.price}" th:text="${bottom.type} + ' - ' + ${bottom.price} + ' Kr.'"></option>
                    </th:block>
                </select>

                <select id="selectTopping" onchange="updateTotalPrice()">
                    <option value="" disabled selected>Vælg en topping</option>
                    <th:block th:each="topping : ${toppings}">
                        <option th:value="${topping.toppingId}" th:data-price="${topping.price}" th:text="${topping.type} + ' - ' + ${topping.price} + ' Kr.'"></option>
                    </th:block>
                </select>


                <select id="selectQuantity" onchange="updateTotalPrice()">
                    <option value="" disabled selected>Vælg antal</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <div class="box center-two">
                    <input type="number" id="totalPrice" name="result" readonly th:value="${total}">
                    <span id="currencyLabel">Kr.</span>
                </div>

            </div>
        </form>
        <form>
            <button type="submit" value="kurv">Læg i kurv</button>
        </form>
    </div>
</div>

<script>
    function updateTotalPrice() {
        const bottomSelect = document.getElementById('selectBottom');
        const toppingSelect = document.getElementById('selectTopping');
        const quantitySelect = document.getElementById('selectQuantity');

        const bottomPrice = bottomSelect.options[bottomSelect.selectedIndex].dataset.price;
        const toppingPrice = toppingSelect.options[toppingSelect.selectedIndex].dataset.price;
        const quantity = quantitySelect.value;

        const total = (parseInt(bottomPrice, 10) + parseInt(toppingPrice, 10)) * parseInt(quantity, 10);
        document.getElementById('totalPrice').value = total;
    }
</script>

</body>
</html>
